(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-794c6282"],{"1c4c":function(t,e,r){"use strict";var i=r("9b43"),s=r("5ca1"),a=r("4bf8"),l=r("1fa8"),o=r("33a4"),n=r("9def"),u=r("f1ae"),c=r("27ee");s(s.S+s.F*!r("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,s,d,f=a(t),p="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,v=void 0!==h,b=0,m=c(f);if(v&&(h=i(h,g>2?arguments[2]:void 0,2)),void 0==m||p==Array&&o(m))for(e=n(f.length),r=new p(e);e>b;b++)u(r,b,v?h(f[b],b):f[b]);else for(d=m.call(f),r=new p;!(s=d.next()).done;b++)u(r,b,v?l(d,h,[s.value,b],!0):s.value);return r.length=b,r}})},"59a3":function(t,e,r){"use strict";r("5ef8")},"5ef8":function(t,e,r){},9406:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",[r("el-form-item",[r("el-select",{attrs:{placeholder:"server"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},t._l(t.servers,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1),r("div",{staticStyle:{position:"relative",display:"inline-block",width:"195px"}},[r("el-select",{staticStyle:{position:"absolute",left:"0"},attrs:{placeholder:"group"},model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}},t._l(t.rules,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1),r("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"group"},model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}})],1),r("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("Save filter")]),r("el-button",{on:{click:t.onDelete}},[t._v("Delete filter")])],1)],1),r("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogTableVisible,"modal-append-to-body":!1,"show-close":!0,"before-close":t.dialogCancel}},[r("pre",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word",color:"rgb(191, 203, 217)","background-color":"rgb(48, 65, 86)"}},[t._v("      "+t._s(t.dialogContent)+"\n    ")]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.dialogCancel}},[t._v("Cancel")])],1)]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.listFitler,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","default-sort":{prop:"group",order:"ascending"}}},[r("el-table-column",{attrs:{label:"ID",width:"50",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index)+" ")]}}])}),r("el-table-column",{attrs:{prop:"group",sortable:"",label:"Group"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.group)+" ")]}}])}),r("el-table-column",{attrs:{prop:"start",sortable:"",label:"StartTime",width:"190",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.formatDate(e.row.start))+" ")]}}])}),r("el-table-column",{attrs:{prop:"stop",sortable:"",label:"StopTime",width:"190",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.formatDate(e.row.stop))+" ")]}}])}),r("el-table-column",{attrs:{prop:"statename",sortable:"",label:"State",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{type:t._f("statusFilter")(e.row.statename)}},[t._v(t._s(e.row.statename))])]}}])}),r("el-table-column",{attrs:{label:"Operation",width:"400",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{staticClass:"operation",style:{visibility:e.row.statename===t.RUNNING?"visible":"hidden"},attrs:{type:"blue"},on:{click:function(r){return t.restart(e.row.idx)}}},[t._v("RESTART")]),r("el-tag",{staticClass:"operation",style:{visibility:e.row.statename===t.STOPPED||e.row.statename===t.BACKOFF?"visible":"hidden"},attrs:{type:"blue"},on:{click:function(r){return t.start(e.row.idx)}}},[t._v("START")]),r("el-tag",{staticClass:"operation",style:{visibility:e.row.statename===t.RUNNING?"visible":"hidden"},attrs:{type:"blue"},on:{click:function(r){return t.stop(e.row.idx)}}},[t._v("STOP")]),r("el-tag",{staticClass:"operation",attrs:{type:"blue"},on:{click:function(r){return t.fresh(e.row.idx)}}},[t._v("FRESH")]),r("el-tag",{staticClass:"operation",attrs:{type:"blue"},on:{click:function(r){return t.out(e.row.idx)}}},[t._v("OUT")]),r("el-tag",{staticClass:"operation",attrs:{type:"blue"},on:{click:function(r){return t.err(e.row.idx)}}},[t._v("ERR")])]}}])})],1)],1)},s=[],a=(r("1c4c"),r("a481"),r("7f7f"),r("3b2b"),r("ac6a"),r("5df3"),r("4f7f"),r("b775"));function l(t){return Object(a["a"])({url:"/api/supervisor/list",method:"get"})}function o(t){return Object(a["a"])({url:"/api/supervisor/stop",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/api/supervisor/status",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/api/supervisor/restart",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/api/supervisor/start",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/api/supervisor/std_out",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/api/supervisor/std_err",method:"post",data:t})}function p(){return Object(a["a"])({url:"/api/supervisor/config",method:"get"})}var g={filters:{statusFilter:function(t){var e={RUNNING:"success",BACKOFF:"gray",STARTING:"gray",STOPPING:"gray",STOPPED:"danger"};return e[t]}},data:function(){return{RUNNING:"RUNNING",STOPPED:"STOPPED",BACKOFF:"BACKOFF",list:null,listLoading:!0,rule:".+",rules:new Set([".+"]),server:"",servers:[],dialogTableVisible:!1,dialogTitle:"",dialogContent:""}},computed:{listFitler:function(){if(this.list){var t=new RegExp(this.rule),e=this.server;return this.list.filter((function(r){return r.server===e&&t.test(r.group)}))}return null}},mounted:function(){localStorage.rules&&"{}"!==localStorage.rules&&(this.rules=new Set(JSON.parse(localStorage.rules))),localStorage.rule&&(this.rule=localStorage.rule),localStorage.server&&(this.server=localStorage.server)},created:function(){this.fetchConfig(),this.fetchData()},methods:{fetchConfig:function(){var t=this;this.listLoading=!0,p().then((function(e){t.servers=e.data.supervisorList.map((function(t,e){return t=t.name,t})),t.listLoading=!1}))},fetchData:function(){var t=this;this.listLoading=!0;var e={};l(e).then((function(e){t.list=e.data.map((function(t,e){return t.idx=e,t})),t.listLoading=!1}))},fresh:function(t){var e=this;this.listLoading=!0;var r={server:this.server,group:this.list[t].group,name:this.list[t].name};n(r).then((function(r){r.data.idx=t,e.$set(e.list,t,r.data),e.listLoading=!1,e.$message(e.list[t].group+" fresh!")}))},out:function(t){var e=this;this.listLoading=!0;var r={server:this.server,group:this.list[t].group,name:this.list[t].name};d(r).then((function(r){e.dialogTitle=e.list[t].group,e.dialogTableVisible=!0,e.dialogContent=r.data.log,e.listLoading=!1,e.$message(e.list[t].group+" ok!")}))},err:function(t){var e=this;this.listLoading=!0;var r={server:this.server,group:this.list[t].group,name:this.list[t].name};f(r).then((function(r){e.dialogTitle=e.list[t].group,e.dialogTableVisible=!0,e.dialogContent=r.data.log,e.listLoading=!1,e.$message(e.list[t].group+" ok!")}))},stop:function(t){var e=this;this.listLoading=!0;var r={server:this.server,group:this.list[t].group,name:this.list[t].name};o(r).then((function(r){r.data.idx=t,e.$set(e.list,t,r.data),e.listLoading=!1,e.$message(e.list[t].group+" stopped!")}))},start:function(t){var e=this;this.listLoading=!0;var r={server:this.server,group:this.list[t].group,name:this.list[t].name};c(r).then((function(r){r.data.idx=t,e.$set(e.list,t,r.data),e.listLoading=!1,e.$message(e.list[t].group+" started!")}))},restart:function(t){var e=this;this.listLoading=!0;var r={server:this.server,group:this.list[t].group,name:this.list[t].name};u(r).then((function(r){r.data.idx=t,e.$set(e.list,t,r.data),e.listLoading=!1,e.$message(e.list[t].group+" restarted!")}))},formatDate:function(t){return t=1e3*parseInt(t),new Date(t).toISOString().substring(0,19).replace(/T/," ")},onSave:function(){this.rules.add(this.rule),this.rules=new Set(Array.from(this.rules)),localStorage.rules=JSON.stringify(Array.from(this.rules)),localStorage.rule=this.rule,localStorage.server=this.server},onDelete:function(){this.rules.delete(this.rule),this.rules=new Set(Array.from(this.rules)),localStorage.rules=JSON.stringify(Array.from(this.rules)),this.rule=".+",localStorage.rule=this.rule,this.server=this.servers[0],localStorage.server=this.servers[0]},dialogCancel:function(){this.dialogTableVisible=!1}}},h=g,v=(r("59a3"),r("2877")),b=Object(v["a"])(h,i,s,!1,null,"63de29da",null);e["default"]=b.exports},f1ae:function(t,e,r){"use strict";var i=r("86cc"),s=r("4630");t.exports=function(t,e,r){e in t?i.f(t,e,s(0,r)):t[e]=r}}}]);